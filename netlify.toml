# Settings in the [build] context are global and are applied to
# all contexts unless otherwise overridden by more specific contexts.
[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  # If not set, defaults to the root directory.
  base = "app/site/"

  # Directory that contains the deploy-ready HTML files and
  # assets generated by the build. This is relative to the base
  # directory if one has been set, or the root directory if
  # a base has not been set. This sample publishes the directory
  # located at the absolute path "root/project/build-output"

  # No src file while using literal HTML file with no processing
  publish = "dist"

  # Default build command.
  #
  # See README.md for description of NPM commands
  command = "npm run build"

# Use [dev] to set configuration overrides for local
# development environments run using Netlify Dev - except
# for environment variables. Environment variables for Netlify
# Dev should be set under [context.dev.environment] instead.
# NOTE: None of this worked. I'm now running both dev servers separately
#
[dev]
  # Why is pwd for command not `app/site/` which is base?
  # command = "npm run site:dev -- --port 12345"
  base = "app/site/"
  # As noted in https://docs.netlify.com/configure-builds/file-based-configuration/#netlify-dev
  # targetPort must be present to disable Netlify's static file server because
  # (I think) the static file server is having permission issues with the /docker-volumes directory
  # as its stored protected inside this directory structure
  # I might be wrong and these docker errors are caused by something else
  targetPort = 12345
  port = 8888
  autoLaunch = false
